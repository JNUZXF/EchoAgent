# EchoAgent - æ™ºèƒ½ä½“æ¡†æ¶

<div align="center">

![EchoAgent Logo](https://img.shields.io/badge/EchoAgent-æ™ºèƒ½ä½“æ¡†æ¶-blue?style=for-the-badge)
![Python](https://img.shields.io/badge/Python-3.8+-green?style=for-the-badge&logo=python)
![License](https://img.shields.io/badge/License-MIT-yellow?style=for-the-badge)
![GitHub Stars](https://img.shields.io/github/stars/JNUZXF/EchoAgent?style=for-the-badge)

**å…ˆå›ç­”ï¼Œå†å†³ç­–çš„æ™ºèƒ½ä½“æ¡†æ¶**

[å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [ç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§) â€¢ [æ¶æ„](#æ¶æ„è®¾è®¡) â€¢ [æ–‡æ¡£](#ä½¿ç”¨æ–‡æ¡£) â€¢ [è´¡çŒ®](#è´¡çŒ®æŒ‡å—)

</div>

## ğŸ“– é¡¹ç›®ç®€ä»‹

EchoAgent æ˜¯ä¸€ä¸ªåˆ›æ–°çš„æ™ºèƒ½ä½“æ¡†æ¶ï¼Œé‡‡ç”¨ç‹¬ç‰¹çš„"**å…ˆå›ç­”-å†åˆ¤æ–­-å·¥å…·è°ƒç”¨-END()ç»ˆæ­¢**"æœºåˆ¶ã€‚ä¸ä¼ ç»Ÿçš„å…ˆè°ƒç”¨å·¥å…·å†å›ç­”çš„æ¨¡å¼ä¸åŒï¼ŒEchoAgent è®©ä¸»æ¨¡å‹é¦–å…ˆåŸºäºå·²æœ‰çŸ¥è¯†ç›´æ¥å›ç­”ç”¨æˆ·é—®é¢˜ï¼Œç„¶åç”±å†³ç­–æ¨¡å‹åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·è¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ã€‚

### ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- **ğŸ”„ åŒæ¨¡å‹ååŒ**: ä¸»æ¨¡å‹è´Ÿè´£å›ç­”ï¼Œå†³ç­–æ¨¡å‹è´Ÿè´£åˆ¤æ–­å·¥å…·è°ƒç”¨
- **âš¡ å¿«é€Ÿå“åº”**: å…ˆç»™å‡ºç›´æ¥å›ç­”ï¼Œå†æ ¹æ®éœ€è¦æ·±å…¥å¤„ç†
- **ğŸ›¡ï¸ å®‰å…¨æ‰§è¡Œ**: å†…ç½®ä»£ç æ‰§è¡Œå™¨ï¼Œæ”¯æŒå®‰å…¨çš„ Python ä»£ç è¿è¡Œ
- **ğŸ”§ å·¥å…·ç”Ÿæ€**: ä¸°å¯Œçš„å·¥å…·é›†ï¼Œæ”¯æŒæ–‡æ¡£å¤„ç†ã€æ•°æ®åˆ†æã€ç½‘ç»œæœç´¢ç­‰
- **ğŸ“Š æŒä¹…åŒ–ä¸Šä¸‹æ–‡**: è·¨å¯¹è¯çš„å˜é‡ä¿æŒï¼Œæ”¯æŒè¿ç»­çš„æ•°æ®åˆ†æä»»åŠ¡
- **ğŸ¯ æ™ºèƒ½ç»ˆæ­¢**: é€šè¿‡ `END()` ä¿¡å·å®ç°æ™ºèƒ½çš„ä»»åŠ¡å®Œæˆåˆ¤æ–­

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```mermaid
graph TD
    A[ç”¨æˆ·é—®é¢˜] --> B[ä¸»æ¨¡å‹ç›´æ¥å›ç­”]
    B --> C[å†³ç­–æ¨¡å‹åˆ¤æ–­]
    C --> D{éœ€è¦å·¥å…·?}
    D -->|æ˜¯| E[è°ƒç”¨å·¥å…·]
    D -->|å¦| F[è¾“å‡º END()]
    E --> G[å·¥å…·æ‰§è¡Œç»“æœ]
    G --> H[æ›´æ–°ä¸Šä¸‹æ–‡]
    H --> I[ä¸»æ¨¡å‹åˆ†æç»“æœ]
    I --> C
    F --> J[ä»»åŠ¡å®Œæˆ]
```

### æ ¸å¿ƒç»„ä»¶

- **AgentConfig**: é…ç½®ç®¡ç†ï¼Œæ”¯æŒå¤šç”¨æˆ·ã€å¤šæ¨¡å‹
- **AgentStateManager**: çŠ¶æ€ç®¡ç†ï¼Œå¤„ç†å¯¹è¯å†å²å’Œæ–‡ä»¶å­˜å‚¨
- **AgentToolManager**: å·¥å…·ç®¡ç†ï¼Œç»Ÿä¸€æ³¨å†Œå’Œè°ƒç”¨æœ¬åœ°/è¿œç¨‹å·¥å…·
- **LLMManager**: å¤§æ¨¡å‹ç®¡ç†ï¼Œæ”¯æŒå¤šç§ LLM æä¾›å•†
- **CodeExecutor**: å®‰å…¨ä»£ç æ‰§è¡Œå™¨ï¼Œæ”¯æŒæŒä¹…åŒ–ä¸Šä¸‹æ–‡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- æ”¯æŒçš„ LLM æä¾›å•† API å¯†é’¥ï¼ˆè±†åŒ…ã€OpenAIã€Claude ç­‰ï¼‰

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/JNUZXF/EchoAgent.git
cd EchoAgent
```

2. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt  # éœ€è¦åˆ›å»ºæ­¤æ–‡ä»¶
```

3. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„ API å¯†é’¥
DOUBAO_API_KEY=your_doubao_api_key
OPENAI_API_KEY=your_openai_api_key
# æ›´å¤šé…ç½®...
```

4. **è¿è¡Œç¤ºä¾‹**
```bash
python agent_frame.py
```

### åŸºç¡€ä½¿ç”¨

```python
from agent_frame import Agent, AgentConfig

# åˆ›å»ºé…ç½®
config = AgentConfig(
    user_id="demo_user",
    main_model="doubao-pro",
    tool_model="doubao-pro", 
    flash_model="doubao-pro"
)

# åˆå§‹åŒ–æ™ºèƒ½ä½“
agent = Agent(config)

# å¯åŠ¨å¯¹è¯
await agent.chat_loop()
```

## ğŸ“š ä½¿ç”¨æ–‡æ¡£

### å·¥å…·ç³»ç»Ÿ

EchoAgent å†…ç½®å¤šç§å·¥å…·ï¼š

#### CodeRunner - ä»£ç æ‰§è¡Œå™¨
```python
# ç”¨æˆ·: å¸®æˆ‘è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‰10é¡¹
# AIä¼šç›´æ¥å›ç­”ï¼Œç„¶åè‡ªåŠ¨è°ƒç”¨CodeRunneræ‰§è¡Œä»£ç 
```

#### æ–‡æ¡£å¤„ç†å·¥å…·
- PDF é˜…è¯»å’Œè½¬æ¢
- æ–‡æ¡£å‘é‡åŒ–å’Œæ£€ç´¢
- å›¾åƒå¤„ç†å’ŒOCR

#### æ•°æ®åˆ†æå·¥å…·
- è‚¡ç¥¨æ•°æ®è·å–
- è´¢åŠ¡æŠ¥è¡¨åˆ†æ
- æ•°æ®å¯è§†åŒ–

### æ‰©å±•å¼€å‘

#### æ·»åŠ è‡ªå®šä¹‰å·¥å…·

1. **åˆ›å»ºå·¥å…·ç±»**
```python
class MyTool:
    def execute(self, **kwargs):
        # å·¥å…·é€»è¾‘
        return result
```

2. **æ³¨å†Œå·¥å…·**
```python
agent.tool_manager.register_local_tool(
    "my_tool", 
    MyTool(), 
    tool_config_for_prompt
)
```

3. **æ›´æ–°å·¥å…·é…ç½®**
åœ¨ `tools_configs.py` ä¸­æ·»åŠ å·¥å…·æè¿°ã€‚

## ğŸ”§ é…ç½®è¯´æ˜

### æ¨¡å‹é…ç½®

æ”¯æŒå¤šç§ LLM æä¾›å•†ï¼š

```python
# è±†åŒ…ç³»åˆ—
"doubao-pro", "doubao-1.5-lite", "doubao-1.5-pro-256k"

# OpenAI ç³»åˆ—  
"gpt-4o", "gpt-4o-mini"

# Claude ç³»åˆ—
"anthropic/claude-3.5-sonnet"

# å¼€æºæ¨¡å‹
"opensource/llama-3.1-8b"
```

### å®‰å…¨é…ç½®

CodeExecutor æ”¯æŒä¸‰ç§å®‰å…¨çº§åˆ«ï¼š
- `strict`: ä»…å…è®¸åŸºæœ¬æ ‡å‡†åº“
- `medium`: å…è®¸å¸¸ç”¨ç§‘å­¦è®¡ç®—åº“ï¼ˆé»˜è®¤ï¼‰
- `permissive`: å…è®¸å¤§éƒ¨åˆ†åº“ï¼Œä»…ç¦æ­¢å±é™©æ“ä½œ

## ğŸ“ é¡¹ç›®ç»“æ„

```
EchoAgent/
â”œâ”€â”€ agent_frame.py          # ä¸»æ¡†æ¶å…¥å£
â”œâ”€â”€ prompts/               # æç¤ºè¯ç®¡ç†
â”‚   â””â”€â”€ agent_prompts.py
â”œâ”€â”€ tools_agent/           # å·¥å…·é›†åˆ
â”‚   â”œâ”€â”€ llm_manager.py     # LLM ç®¡ç†
â”‚   â”œâ”€â”€ code_interpreter.py
â”‚   â””â”€â”€ ...
â”œâ”€â”€ utils/                 # å·¥å…·å®ç°
â”‚   â”œâ”€â”€ code_runner.py     # ä»£ç æ‰§è¡Œå™¨
â”‚   â””â”€â”€ ...
â”œâ”€â”€ tools_configs.py       # å·¥å…·é…ç½®
â”œâ”€â”€ ToDo.md               # ä¼˜åŒ–æ¸…å•
â””â”€â”€ files/                # ç”¨æˆ·æ•°æ®å­˜å‚¨
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md) è·å–è¯¦ç»†æŒ‡å—ã€‚

### è´¡çŒ®æ–¹å¼

1. **æŠ¥å‘Šé—®é¢˜**: ä½¿ç”¨ [Issue æ¨¡æ¿](.github/ISSUE_TEMPLATE/) æŠ¥å‘Š bug
2. **åŠŸèƒ½å»ºè®®**: æäº¤åŠŸèƒ½è¯·æ±‚å’Œæ”¹è¿›å»ºè®®  
3. **ä»£ç è´¡çŒ®**: Fork é¡¹ç›®ï¼Œåˆ›å»ºåˆ†æ”¯ï¼Œæäº¤ PR
4. **æ–‡æ¡£æ”¹è¿›**: å®Œå–„æ–‡æ¡£å’Œç¤ºä¾‹

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements-dev.txt

# è¿è¡Œæµ‹è¯•
python -m pytest tests/

# ä»£ç æ ¼å¼åŒ–
black agent_frame.py
```

## ğŸ“‹ å¾…åŠäº‹é¡¹

æŸ¥çœ‹ [ToDo.md](ToDo.md) äº†è§£å½“å‰çš„ä¼˜åŒ–è®¡åˆ’å’Œå¯è®¤é¢†çš„ä»»åŠ¡ã€‚

## ğŸ› é—®é¢˜æ’æŸ¥

### å¸¸è§é—®é¢˜

**Q: å·¥å…·è°ƒç”¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿ**
A: æ£€æŸ¥ `files/{user_id}/{agent_name}/tool_conversations.json` ä¸­çš„è¯¦ç»†æ—¥å¿—ã€‚

**Q: ä»£ç æ‰§è¡Œè¶…æ—¶ï¼Ÿ**
A: è°ƒæ•´ `CodeExecutor` çš„ `timeout` å‚æ•°ï¼Œæˆ–æ£€æŸ¥ä»£ç å¤æ‚åº¦ã€‚

**Q: API è°ƒç”¨å¤±è´¥ï¼Ÿ**
A: ç¡®è®¤ `.env` æ–‡ä»¶ä¸­çš„ API å¯†é’¥é…ç½®æ­£ç¡®ã€‚

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹å®Œæ•´å¯¹è¯å†å²
cat files/{user_id}/{agent_name}/full_context_conversations.md

# æŸ¥çœ‹å·¥å…·æ‰§è¡Œæ—¥å¿—
cat files/{user_id}/{agent_name}/tool_conversations.json
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](LICENSE)ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹é¡¹ç›®å’Œç¤¾åŒºçš„æ”¯æŒï¼š
- [LangChain](https://github.com/langchain-ai/langchain) - å¯å‘äº†å·¥å…·é“¾è®¾è®¡
- [OpenAI](https://openai.com/) - API æ”¯æŒ
- [å­—èŠ‚è·³åŠ¨](https://www.volcengine.com/) - è±†åŒ…æ¨¡å‹æ”¯æŒ

## ğŸ“ è”ç³»æˆ‘ä»¬

- æäº¤ Issue: [GitHub Issues](https://github.com/JNUZXF/EchoAgent/issues)
- é‚®ç®±: [è¯·æ·»åŠ ä½ çš„é‚®ç®±]
- å¾®ä¿¡ç¾¤: [è¯·æ·»åŠ äºŒç»´ç ]

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªæ˜Ÿæ ‡ï¼**

[â¬† å›åˆ°é¡¶éƒ¨](#echoagent---æ™ºèƒ½ä½“æ¡†æ¶)

</div>
